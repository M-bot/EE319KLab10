#include "Matrix.h"
#include "ST7735.h"
#include "TExaS.h"
#include "print.h"
#include "tm4c123gh6pm.h"
#include "Graphics2D.h"
#include <math.h>
#define PI 3.141592654

#define LEFT -1;
#define STAY 0;
#define RIGHT 1;
//18x21
const unsigned short Character_Sprite[] = {
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x2946, 0x8416, 0x0000, 0x0000, 0x0000, 0x9CF8, 0x2946, 0x0000,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x420A, 0xB59D, 0x31A8, 0x2947, 0x422B, 0xC63F,
 0x420A, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x39A9, 0xC5FF, 0xC61F, 0xC5FF,
 0xC61F, 0xC61F, 0x39A9, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x420A, 0xCE5F,
 0xC63F, 0xC63F, 0xC63F, 0xCE5F, 0x420A, 0x0000, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0x0000,
 0x10A3, 0x7BD4, 0x7394, 0x7393, 0x7393, 0x7BB3, 0x0000, 0x0000, 0x0862, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000,
 0xAD7C, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xAD7C, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0x0000, 0x41EA, 0x8435, 0x9478, 0x94B8, 0x9CF9, 0xA4F9, 0xA4F9, 0x9CD9, 0x9499, 0x7394, 0x3188, 0x0000, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x5AAA, 0xB5BE, 0x9CF9, 0x8415, 0x8C37, 0x8C37, 0x8C37, 0x8C55, 0xAD5D, 0xAD5B, 0x4A67, 0x0000,
 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0x4206, 0xDEB8, 0xC61F, 0x422C, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x6B52, 0xCE5F,
 0xEF17, 0x0861, 0x0000, 0xFFFF, 0xFFFF, 0x0000, 0x4A6C, 0x9491, 0xE716, 0xE73A, 0x5AC8, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x840E, 0xEF59, 0xF736, 0xB596, 0x4A6D, 0x0000, 0xFFFF, 0x0020, 0xBDBE, 0xAD76, 0xAD2F, 0xA510, 0x630B, 0x2967, 0x2126, 0x2126,
 0x2126, 0x2967, 0x738C, 0xAD30, 0xAD2F, 0xB5B9, 0xAD3B, 0x0000, 0xFFFF, 0x0020, 0xBDBE, 0x528D, 0x0000, 0x0000, 0x6B31, 0xC63F,
 0xBDFF, 0xC61F, 0xC5FF, 0xBDBF, 0x4A6C, 0x0000, 0x0000, 0x7392, 0xAD5C, 0x0000, 0xFFFF, 0x0020, 0xB5BE, 0xB5B9, 0x9492, 0x0000,
 0x6B51, 0xC61F, 0xBDDE, 0xBDDE, 0xBDDE, 0xBDDF, 0xBDDA, 0x94B2, 0x0020, 0x6B72, 0xAD7C, 0x0000, 0xFFFF, 0x0000, 0xB59E, 0xDEDF,
 0xCE7B, 0x3187, 0x7BD4, 0xBDBF, 0xBDBE, 0xBDDE, 0xBDDE, 0xBDDE, 0xDEFF, 0xD6BB, 0x39C8, 0x8415, 0xAD7B, 0x0000, 0xFFFF, 0x0000,
 0xAD5C, 0xC61E, 0xC63F, 0xAD5D, 0xBDFE, 0xBDBE, 0xB5BD, 0xBDBE, 0xBDDE, 0xBDDE, 0xBDFE, 0xBDDF, 0xAD5C, 0xB5BE, 0x8415, 0x0000,
 0xFFFF, 0x0000, 0x0000, 0x8C56, 0xC5FF, 0xBDDE, 0xBDDE, 0xBDBE, 0xBDBE, 0xBDBE, 0xBDDE, 0xBDDE, 0xBDDE, 0xBDDE, 0xC5FE, 0x422B,
 0x0000, 0x0000, 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0x94B9, 0xC5FF, 0xBDDE, 0xBDDE, 0xBDBE, 0xBDBE, 0xBDBE, 0xBDDE, 0xBDDE, 0xBDDE,
 0x7BB3, 0x0000, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x0000, 0xB59D, 0xC5FF, 0xC63F, 0xC61F, 0xC63F, 0xC63F, 0xBDFF,
 0xC5FF, 0x8414, 0x0000, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x0000, 0x1082, 0x1083, 0x1083, 0x1083, 0x1082,
 0x1083, 0x1083, 0x1083, 0x10A3, 0x0000, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,

};

uint32_t Damage; 
uint32_t Fire_Rate;  //# Times per Second
uint32_t Speed;      //Pixels per second if held down
uint8_t Max_Health; //Multiples of two to correspond to half hearts
uint8_t Current_Health;  //""
uint32_t Shot_Speed;      // Tears pixels per second from when they are created
uint8_t Current_x;
uint8_t Current_y;
uint8_t Width;
uint8_t Height;
uint8_t ID;

void Character_Init(void)
{
		Damage = 50;
		Fire_Rate = 2;
		Speed = 1;
		Max_Health = 6;
		Current_Health =6;
	  Shot_Speed = 25;
		Width =18;
		Height =21;
	  Current_x = 61;
		Current_y = 30;
		ID = AddSprite(Character_Sprite,Width,Height,Current_x,Current_y);
	
}

uint8_t Check_Collision(uint8_t test_x, uint8_t test_y, uint8_t test_width, uint8_t test_height)
{
	for(int i=0;i<Width;i++)
		for(int x =0;x<test_width;x++)
			if((i+Width)==(x+test_width))
				return 1;
	for(int j=0;j<Height;j++)
		for(int y =0;y<test_height;y++)
			if((y+Height)==(y+test_height))
				return 1;
	return 0;
}
	
void Move(int8_t x,int8_t y)
{
	if( (Current_x+Width + x*(Speed))<=140 && (int8_t)(Current_x + x*(Speed))>=0)
		Current_x += x*(Speed);
	if( (Current_y+Height + y*(Speed))<=80 && (int8_t)(Current_y + y*(Speed))>=0)
		Current_y += y*(Speed);
	UpdateSprite(ID,Current_x,Current_y);
}
